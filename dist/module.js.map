{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config_ctrl.ts","webpack:///./datasource.ts","webpack:///./module.ts","webpack:///./query_ctrl.ts","webpack:///external \"app/plugins/sdk\"","webpack:///external \"lodash\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;AClFA;AAOE;AACA,+BAAY,MAAZ,EAAkB;AAChB,gBAAQ,GAAR,CAAY,mBAAZ;AACA,gBAAQ,GAAR,CAAY,MAAZ;AACA,gBAAQ,GAAR,CAAY,IAAZ;AAEA,aAAK,KAAL,GAAa,CACX,EAAE,MAAM,IAAR,EAAc,OAAO,IAArB,EADW,EAEX,EAAE,MAAM,MAAR,EAAgB,OAAO,MAAvB,EAFW,EAGX,EAAE,MAAM,IAAR,EAAc,OAAO,IAArB,EAHW,EAIX,EAAE,MAAM,IAAR,EAAc,OAAO,IAArB,EAJW,EAKX,EAAE,MAAM,IAAR,EAAc,OAAO,KAArB,EALW,CAAb;AAQA,aAAK,SAAL,GAAiB,CACf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EADe,EAEf,EAAE,MAAM,aAAR,EAAuB,OAAO,IAA9B,EAFe,EAGf,EAAE,MAAM,YAAR,EAAsB,OAAO,IAA7B,EAHe,EAIf,EAAE,MAAM,WAAR,EAAqB,OAAO,IAA5B,EAJe,EAKf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EALe,EAMf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EANe,EAOf,EAAE,MAAM,OAAR,EAAiB,OAAO,IAAxB,EAPe,EAQf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EARe,EASf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EATe,EAUf,EAAE,MAAM,OAAR,EAAiB,OAAO,IAAxB,EAVe,EAWf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAXe,EAYf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAZe,EAaf,EAAE,MAAM,UAAR,EAAoB,OAAO,IAA3B,EAbe,EAcf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAde,EAef,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EAfe,EAgBf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EAhBe,EAiBf,EAAE,MAAM,UAAR,EAAoB,OAAO,IAA3B,EAjBe,EAkBf,EAAE,MAAM,WAAR,EAAqB,OAAO,IAA5B,EAlBe,EAmBf,EAAE,MAAM,YAAR,EAAsB,OAAO,IAA7B,EAnBe,EAoBf,EAAE,MAAM,WAAR,EAAqB,OAAO,IAA5B,EApBe,EAqBf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EArBe,EAsBf,EAAE,MAAM,UAAR,EAAoB,OAAO,IAA3B,EAtBe,EAuBf,EAAE,MAAM,UAAR,EAAoB,OAAO,IAA3B,EAvBe,EAwBf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EAxBe,EAyBf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAzBe,EA0Bf,EAAE,MAAM,WAAR,EAAqB,OAAO,IAA5B,EA1Be,EA2Bf,EAAE,MAAM,OAAR,EAAiB,OAAO,IAAxB,EA3Be,EA4Bf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EA5Be,EA6Bf,EAAE,MAAM,YAAR,EAAsB,OAAO,IAA7B,EA7Be,EA8Bf,EAAE,MAAM,UAAR,EAAoB,OAAO,IAA3B,EA9Be,EA+Bf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EA/Be,EAgCf,EAAE,MAAM,QAAR,EAAkB,OAAO,IAAzB,EAhCe,EAiCf,EAAE,MAAM,WAAR,EAAqB,OAAO,IAA5B,EAjCe,EAkCf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAlCe,EAmCf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAnCe,EAoCf,EAAE,MAAM,OAAR,EAAiB,OAAO,KAAxB,EApCe,EAqCf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EArCe,EAsCf,EAAE,MAAM,WAAR,EAAqB,OAAO,IAA5B,EAtCe,EAuCf,EAAE,MAAM,SAAR,EAAmB,OAAO,IAA1B,EAvCe,CAAjB;AA0CA,aAAK,OAAL,CAAa,QAAb,CAAsB,IAAtB,GAA6B,KAAK,OAAL,CAAa,QAAb,CAAsB,IAAtB,IAA8B,IAA3D;AACA,aAAK,OAAL,CAAa,QAAb,CAAsB,QAAtB,GAAiC,KAAK,OAAL,CAAa,QAAb,CAAsB,QAAtB,IAAkC,IAAnE;AACD;AAhEM,oCAAc,sBAAd;AAiET;AAAC,CAlED;QAAa,iB,GAAA,iB;;;;;;;;;;;;;;;;;;;;;;;;;ACEb;AAQE;AACA,+BAAY,gBAAZ,EAAsC,UAAtC,EAA0D,WAA1D,EAA+E,EAA/E,EAAiF;AAA3C;AAAoB;AAAqB;AAC7E,gBAAQ,GAAR,CAAY,mBAAZ;AACA,gBAAQ,GAAR,CAAY,gBAAZ;AAEA,aAAK,IAAL,GAAY,iBAAiB,IAA7B;AACA,aAAK,IAAL,GAAY,iBAAiB,IAA7B;AAEA,YAAI,cAAiB,iBAAiB,QAAjB,CAA0B,MAA1B,GAAgC,GAAhC,GAAoC,iBAAiB,QAAjB,CAA0B,GAA9D,GAAiE,GAAjE,GAAqE,iBAAiB,QAAjB,CAA0B,GAApH;AACA;AACA;AACA,aAAK,UAAL,GAAkB,WAAS,iBAAiB,QAAjB,CAA0B,IAAnC,GAAuC,QAAvC,GAAgD,iBAAiB,QAAjB,CAA0B,QAA5F;AACA,aAAK,GAAL,GAAW,4BAA0B,iBAAiB,EAA3C,GAA6C,WAA7C,GAAyD,WAApE;AACD;AAED,4DAAgB,KAAhB,EAAqB;AACnB,YAAM,aAAa,CAAC,WAAD,EAAc,UAAd,EAA0B,QAA1B,EAAoC,OAApC,CAAnB;AAEA;AACA,eAAO,KAAK,SAAL,CAAe;AACpB,iBAAK,KAAK,GADU;AAEpB,kBAAM,KAFc;AAGpB,oBAAQ;AAHY,SAAf,EAIJ,IAJI,CAIC,eAAG;AACT,gBAAI,UAAoB,EAAxB;AAEA;AACA,6BAAE,IAAF,CAAO,UAAP,EAAmB,eAAG;AACpB,oBAAI,QAAQ,IAAI,IAAJ,CAAS,GAAT,CAAZ;AACA,oBAAI,SAAS,iBAAE,OAAF,CAAU,MAAM,IAAhB,CAAb,EAAoC;AAClC,4BAAQ,MAAM,IAAN,CAAW,MAAX,GAAoB,MAAM,IAAN,CAAW,CAAX,CAApB,GAAoC,EAA5C;AACD;AACD,oBAAI,OAAO,iBAAE,MAAF,CAAS,iBAAE,IAAF,CAAO,KAAP,CAAT,EAAwB,eAAG;AACpC,2BAAO,OAAO,MAAd;AACD,iBAFU,CAAX;AAGA,wBAAQ,IAAR,CAAY,KAAZ,UAAgB,IAAhB;AACD,aATD;AAWA,mBAAO,iBAAE,GAAF,CAAM,iBAAE,IAAF,CAAO,iBAAE,MAAF,CAAS,OAAT,CAAP,CAAN,EAAiC,kBAAM;AAC5C,uBAAO;AACL,0BAAM,MADD;AAEL,2BAAO;AAFF,iBAAP;AAID,aALM,CAAP;AAMD,SAzBM,CAAP;AA0BD,KA9BD;AAgCA,kDAAM,OAAN,EAAa;AAAb;AACE,YAAI,QAAQ,KAAK,oBAAL,CAA0B,OAA1B,CAAZ;AACA,cAAM,OAAN,GAAgB,MAAM,OAAN,CAAc,MAAd,CAAqB,aAAC;AAAI,oBAAC,EAAD;AAAO,SAAjC,CAAhB;AAEA,YAAI,MAAM,OAAN,CAAc,MAAd,IAAwB,CAA5B,EAA+B;AAC7B,mBAAO,KAAK,EAAL,CAAQ,IAAR,CAAa,EAAC,MAAM,EAAP,EAAb,CAAP;AACD;AAED,YAAI,KAAK,WAAL,CAAiB,eAArB,EAAsC;AACpC,kBAAM,YAAN,GAAqB,KAAK,WAAL,CAAiB,eAAjB,CAAiC,KAAK,IAAtC,CAArB;AACD,SAFD,MAEO;AACL,kBAAM,YAAN,GAAqB,EAArB;AACD;AAED,gBAAQ,GAAR,CAAY,OAAZ;AACA,gBAAQ,GAAR,CAAY,KAAZ;AAEA,YAAI,WAAW,KAAK,WAAL,CAAiB,MAAM,KAAvB,CAAf;AACA;AACA;AAEA,YAAI,WAAW,iBAAE,GAAF,CAAM,SAAS,UAAf,EAA2B,cAAE;AAC1C,mBAAO,MAAK,SAAL,CAAe;AACpB,qBAAQ,MAAK,GAAL,GAAQ,GAAR,GAAY,EAAZ,GAAc,GAAd,GAAkB,MAAK,UADX;AAEpB,sBAAM,KAFc;AAGpB,wBAAQ;AAHY,aAAf,CAAP;AAKD,SANc,CAAf;AAQA,eAAO,QAAQ,GAAR,CAAY,QAAZ,EAAsB,IAAtB,CAA2B,oBAAQ;AACxC,gBAAI,OAAc,EAAlB;AACA,6BAAE,IAAF,CAAO,QAAP,EAAiB,eAAG;AAClB,oBAAI,SAAS,OAAT,IAAoB,WAAxB,EAAqC;AACnC,yBAAK,IAAL,CAAU,IAAI,IAAJ,CAAS,SAAnB;AACD,iBAFD,MAGK;AACH;AACA,wBAAI,WAAW,iBAAE,MAAF,CAAS,IAAI,IAAJ,CAAS,SAAS,OAAlB,EAA2B,IAApC,EAA0C,eAAG;AAC1D,4BAAI,SAAS,IAAI,IAAJ,GAAW,IAAxB;AACA,+BAAO,UAAU,MAAM,KAAN,CAAY,IAAtB,IAA8B,UAAU,MAAM,KAAN,CAAY,EAA3D;AACD,qBAHc,CAAf;AAIA;AACA,yBAAK,IAAL,CAAS,KAAT,OAAa,QAAb;AACD;AACF,aAbD;AAeA,mBAAO,iBAAE,MAAF,CAAS,IAAT,EAAe,MAAf,CAAP;AAEA;AACA,mBAAQ,iBAAE,MAAF,CAAS,MAAM,OAAf,EAAwB,EAAE,MAAM,OAAR,EAAxB,EAA2C,MAA5C,GACH,MAAK,aAAL,CAAmB,MAAM,OAAzB,EAAkC,IAAlC,CADG,GAEH,MAAK,kBAAL,CAAwB,MAAM,OAA9B,EAAuC,IAAvC,CAFJ;AAGD,SAvBM,CAAP;AAwBD,KArDD;AAuDA,wDAAY,KAAZ,EAAiB;AACf,YAAI,UAAU,QAAd;AACA,YAAI,QAAQ,MAAM,EAAN,CAAS,IAAT,CAAc,MAAM,IAApB,EAA0B,OAA1B,CAAZ;AACA,YAAI,OAAO,MAAM,IAAN,CAAW,KAAX,GAAmB,OAAnB,CAA2B,KAA3B,CAAX;AACA,YAAI,aAAoB,CAAC,KAAK,IAAL,EAAD,CAAxB;AAEA;AACA,YAAI,MAAM,EAAN,CAAS,IAAT,OAAoB,MAAM,IAAN,CAAW,IAAX,EAAxB,EAA2C;AACzC,gBAAI,QAAQ,IAAI,EAAhB,EAAoB;AAAE;AACpB,0BAAU,OAAV;AACD;AAAA;AAED;AACA,eAAG;AACD,qBAAK,GAAL,CAAS,CAAT,EAAY,KAAZ;AACA,2BAAW,IAAX,CAAgB,KAAK,IAAL,EAAhB;AACD,aAHD,QAGS,KAAK,QAAL,CAAc,MAAM,EAApB,CAHT;AAID;AAED,eAAO;AACL,qBAAS,OADJ;AAEL,wBAAY;AAFP,SAAP;AAID,KAvBD;AAyBA,0DAAc,OAAd,EAAuB,IAAvB,EAA2B;AACzB;AACA,YAAI,YAAY,QAAQ,CAAR,EAAW,MAA3B;AAEA,YAAI,UAA4C,EAAhD;AACA,YAAI,OAAc,EAAlB;AAEA,YAAI,KAAK,MAAT,EAAiB;AACf;AACA,sBAAU,iBAAE,GAAF,CAAM,KAAK,CAAL,CAAN,EAAe,UAAC,CAAD,EAAG,CAAH,EAAI;AAC3B,uBAAO;AACL,0BAAM,CADD;AAEL,0BAAO,EAAE,KAAF,CAAQ,SAAR,CAAD,GAAuB,MAAvB,GAAiC,OAAQ,CAAR,KAAe,QAAf,GAA0B,QAA1B,GAAqC;AAFvE,iBAAP;AAID,aALS,CAAV;AAOA;AACA,mBAAO,iBAAE,GAAF,CAAM,IAAN,EAAY,eAAG;AACpB,uBAAO,iBAAE,GAAF,CAAM,OAAN,EAAe,eAAG;AACvB,wBAAI,IAAI,IAAI,IAAR,MAAkB,SAAtB,EAAiC,OAAO,IAAP;AAEjC;AACA,2BAAO,IAAI,IAAJ,IAAY,MAAZ,GAAqB,IAAI,IAAI,IAAR,IAAgB,IAArC,GAA4C,IAAI,IAAI,IAAR,CAAnD;AACD,iBALM,CAAP;AAMD,aAPM,CAAP;AAQD;AAED;AACA,eAAO;AACL,kBAAM,CAAC;AACL,sBAAM,OADD;AAEL,yBAAS,OAFJ;AAGL,sBAAM;AAHD,aAAD;AADD,SAAP;AAOD,KAnCD;AAqCA,+DAAmB,OAAnB,EAA4B,IAA5B,EAAgC;AAC9B,YAAI,MAAM;AACR,kBAAM,iBAAE,GAAF,CAAM,OAAN,EAAe,kBAAM;AACrB;AAAA,oBAAC,iBAAD;AAAA,oBAAY,cAAZ;AAEJ,uBAAO;AACL,4BAAQ,OAAO,MADV;AAEL,gCAAY,iBAAE,GAAF,CAAM,IAAN,EAAY,aAAC;AACvB,+BAAO,CAAC,EAAE,MAAF,CAAD,EAAY,EAAE,IAAF,GAAO,IAAnB,CAAP;AACD,qBAFW;AAFP,iBAAP;AAMD,aATK;AADE,SAAV;AAaA,eAAO,GAAP;AACD,KAfD;AAiBA;AACE,eAAO,KAAK,SAAL,CAAe;AACpB,iBAAK,KAAK,GADU;AAEpB,oBAAQ;AAFY,SAAf,EAGJ,IAHI,CAGC,oBAAQ;AACd,gBAAI,SAAS,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,uBAAO,EAAE,QAAQ,SAAV,EAAqB,SAAS,wBAA9B,EAAwD,OAAO,SAA/D,EAAP;AACD;AACD,mBAAO,EAAE,QAAQ,OAAV,EAAmB,SAAS,iCAA+B,SAAS,MAApE,EAA8E,OAAO,OAArF,EAAP;AACD,SARM,CAAP;AASD,KAVD;AAYA,4DAAgB,OAAhB,EAAuB;AACrB,eAAO,EAAP;AACD,KAFD;AAIA,sDAAU,OAAV,EAAiB;AACf,eAAO,KAAK,UAAL,CAAgB,iBAAhB,CAAkC,OAAlC,CAAP;AACD,KAFD;AAIA,iEAAqB,OAArB,EAA4B;AAA5B;AACE;AACA,gBAAQ,OAAR,GAAkB,iBAAE,MAAF,CAAS,QAAQ,OAAjB,EAA0B,kBAAM;AAChD,mBAAO,OAAO,MAAP,KAAkB,eAAzB;AACD,SAFiB,CAAlB;AAIA,YAAI,UAAU,iBAAE,GAAF,CAAM,QAAQ,OAAd,EAAuB,kBAAM;AACzC,mBAAO;AACL,wBAAQ,MAAK,WAAL,CAAiB,OAAjB,CAAyB,OAAO,MAAhC,EAAwC,QAAQ,UAAhD,EAA4D,OAA5D,CADH;AAEL,uBAAO,OAAO,KAFT;AAGL,sBAAM,OAAO,IAHR;AAIL,sBAAM,OAAO;AAJR,aAAP;AAMD,SAPa,CAAd;AASA,gBAAQ,OAAR,GAAkB,OAAlB;AAEA,eAAO,OAAP;AACD,KAlBD;AAmBF;AAAC,CApOD;;;;;;;;;;;;;;;;;;;;;;ACDA;;AACA;;QAGuB,U,GAArB,6B;QACoB,S,GAApB,4B;QACqB,U,GAArB,8B;;;;;;;;;;;;;;;;;;;ACPF;;;;;;;;;;;;;;;;;;;;;;AACA;AAEA;AAAsC;AAKpC;AACA,8BAAY,MAAZ,EAAoB,SAApB,EAAuC,WAAvC,EAAkD;AAAlD,oBACE,kBAAM,MAAN,EAAc,SAAd,KAAwB,IAD1B;AAAuC;AAGrC,cAAK,KAAL,GAAa,CAAC,EAAE,MAAM,aAAR,EAAuB,OAAO,YAA9B,EAAD,EAA+C,EAAE,MAAM,OAAR,EAAiB,OAAO,OAAxB,EAA/C,CAAb;AAEA,cAAK,MAAL,CAAY,MAAZ,GAAqB,MAAK,MAAL,CAAY,MAAZ,IAAsB,eAA3C;AACA,cAAK,MAAL,CAAY,IAAZ,GAAmB,MAAK,MAAL,CAAY,IAAZ,KAAsB,MAAK,SAAL,CAAe,KAAf,CAAqB,IAArB,KAA8B,OAA/B,GAA0C,OAA1C,GAAoD,YAAzE,CAAnB;;AACD;AAED,sDAAW,KAAX,EAAgB;AACd,eAAO,KAAK,UAAL,CAAgB,eAAhB,CAAgC,KAAK,MAAL,CAAY,IAA5C,CAAP;AACD,KAFD;AAIA;AACE,aAAK,SAAL,CAAe,OAAf,GADF,CAC4B;AAC3B,KAFD;AAlBO,mCAAc,4BAAd;AAqBT;AAAC,CAtBD,CAAsC,cAAtC;QAAa,gB,GAAA,gB;;;;;;;;;;;ACHb,qE;;;;;;;;;;;ACAA,oD","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./module.ts\");\n","export class DarkSkyConfigCtrl {\n  static templateUrl = 'partials/config.html';\n  \n  current: any;\n  private units: {name:string, value:string}[];\n  private languages: { name: string, value: string }[];\n\n  /** @ngInject **/\n  constructor($scope) {\n    console.log(\"DarkSkyConfigCtrl\");\n    console.log($scope);\n    console.log(this);\n\n    this.units = [\n      { name: 'SI', value: 'si' },\n      { name: 'Auto', value: 'auto' },\n      { name: 'US', value: 'us' },\n      { name: 'CA', value: 'ca' },\n      { name: 'UK', value: 'uk2' },\n    ];\n\n    this.languages = [\n      { name: 'Arabic', value: 'ar' },\n      { name: 'Azerbaijani', value: 'az' },\n      { name: 'Belarusian', value: 'be' },\n      { name: 'Bulgarian', value: 'bg' },\n      { name: 'Bosnian', value: 'bs' },\n      { name: 'Catalan', value: 'ca' },\n      { name: 'Czech', value: 'cs' },\n      { name: 'Danish', value: 'da' },\n      { name: 'German', value: 'de' },\n      { name: 'Greek', value: 'el' },\n      { name: 'English', value: 'en' },\n      { name: 'Spanish', value: 'es' },\n      { name: 'Estonian', value: 'et' },\n      { name: 'Finnish', value: 'fi' },\n      { name: 'French', value: 'fr' },\n      { name: 'Hebrew', value: 'he' },\n      { name: 'Croatian', value: 'hr' },\n      { name: 'Hungarian', value: 'hu' },\n      { name: 'Indonesian', value: 'id' },\n      { name: 'Icelandic', value: 'is' },\n      { name: 'Italian', value: 'it' },\n      { name: 'Japanese', value: 'ja' },\n      { name: 'Georgian', value: 'ka' },\n      { name: 'Korean', value: 'ko' },\n      { name: 'Cornish', value: 'kw' },\n      { name: 'Norwegian', value: 'nb' },\n      { name: 'Dutch', value: 'nl' },\n      { name: 'Polish', value: 'pl' },\n      { name: 'Portuguese', value: 'pt' },\n      { name: 'Romanian', value: 'ro' },\n      { name: 'Russian', value: 'ru' },\n      { name: 'Slovak', value: 'sk' },\n      { name: 'Slovenian', value: 'sl' },\n      { name: 'Serbian', value: 'sr' },\n      { name: 'Swedish', value: 'sv' },\n      { name: 'Tetum', value: 'tet' },\n      { name: 'Turkish', value: 'tr' },\n      { name: 'Ukrainian', value: 'uk' },\n      { name: 'Chinese', value: 'zh' }\n    ];\n\n    this.current.jsonData.unit = this.current.jsonData.unit || 'si';\n    this.current.jsonData.language = this.current.jsonData.language || 'en';\n  }\n}\n","import _ from \"lodash\";\n\nexport class DarkSkyDatasource {\n\n  type: string;\n  name: string;\n  // darkSky: string;\n  apiOptions: string;\n  url: string;\n\n  /** @ngInject **/\n  constructor(instanceSettings, private backendSrv, private templateSrv, private $q) {\n    console.log(\"DarkSkyDatasource\");\n    console.log(instanceSettings);\n\n    this.type = instanceSettings.type;\n    this.name = instanceSettings.name;\n\n    var credentials = `${instanceSettings.jsonData.apikey}/${instanceSettings.jsonData.lat},${instanceSettings.jsonData.lon}`;\n    // var apiUrl = (_.filter(instanceSettings.meta.routes, { path: 'darksky' })[0] as any).url;\n    // this.darkSky = `${apiUrl}/${credentials}`;\n    this.apiOptions = `units=${instanceSettings.jsonData.unit}&lang=${instanceSettings.jsonData.language}`;\n    this.url = `/api/datasources/proxy/${instanceSettings.id}/darksky/${credentials}`;\n  }\n\n  metricFindQuery(query) {\n    const timeframes = ['currently', 'minutely', 'hourly', 'daily'];\n\n    // metrics for timeseries\n    return this.doRequest({\n      url: this.url,\n      data: query,\n      method: 'GET'\n    }).then(res => {\n      let metrics: string[] = [];\n\n      // get all properties from forecast query\n      _.each(timeframes, key => {\n        var props = res.data[key];\n        if (props && _.isArray(props.data)) {\n          props = props.data.length ? props.data[0] : {};\n        }\n        var keys = _.filter(_.keys(props), key => {\n          return key != \"time\"\n        });\n        metrics.push(...keys);\n      });\n\n      return _.map(_.uniq(_.sortBy(metrics)), metric => {\n        return {\n          text: metric,\n          value: metric\n        };\n      });\n    });\n  }\n\n  query(options) {\n    var query = this.buildQueryParameters(options);\n    query.targets = query.targets.filter(t => !t.hide);\n\n    if (query.targets.length <= 0) {\n      return this.$q.when({data: []});\n    }\n\n    if (this.templateSrv.getAdhocFilters) {\n      query.adhocFilters = this.templateSrv.getAdhocFilters(this.name);\n    } else {\n      query.adhocFilters = [];\n    }\n\n    console.log(\"query\");\n    console.log(query);\n\n    let apiCalls = this.getApiCalls(query.range);\n    // console.log(\"apiCalls\");\n    // console.log(apiCalls);\n\n    let requests = _.map(apiCalls.timestamps, ts => {\n      return this.doRequest({\n        url: `${this.url},${ts}?${this.apiOptions}`,\n        data: query,\n        method: 'GET'\n      });\n    });\n\n    return Promise.all(requests).then(response => {\n      let data: any[] = [];\n      _.each(response, res => {\n        if (apiCalls.dataset == 'currently') {\n          data.push(res.data.currently);\n        }\n        else {\n          // select timestamps inside query range\n          let filtered = _.filter(res.data[apiCalls.dataset].data, res => {\n            let timeMS = res.time * 1000;\n            return timeMS >= query.range.from && timeMS <= query.range.to;\n          });\n          // sort by timestamp\n          data.push(...filtered);\n        }\n      });\n      \n      data = _.sortBy(data, 'time')\n\n      // table query?\n      return (_.filter(query.targets, { type: 'table' }).length) \n        ? this.tableResponse(query.targets, data)\n        : this.timeseriesResponse(query.targets, data);\n    });\n  }\n\n  getApiCalls(range) {\n    let dataset = 'hourly';\n    let hours = range.to.diff(range.from, 'hours');\n    let date = range.from.clone().startOf('day');\n    let timestamps: any[] = [date.unix()];\n\n    // not same day?\n    if (range.to.date() !== range.from.date()) {\n      if (hours > 7 * 24) { // daily queries - daily\n        dataset = 'daily';\n      };\n\n      // create one timestamp per additional day\n      do {\n        date.add(1, 'day');\n        timestamps.push(date.unix());\n      } while (date.isBefore(range.to));\n    }\n\n    return {\n      dataset: dataset,\n      timestamps: timestamps,\n    }\n  }\n\n  tableResponse(targets, data) {\n    // use first metric for table query\n    let timeframe = targets[0].target;\n\n    let columns: { text: string, type: string }[] = [];\n    let rows: any[] = [];\n\n    if (data.length) {\n      // extract columns\n      columns = _.map(data[0], (v,k) => {\n        return {\n          text: k,\n          type: (k.match(/[Tt]ime/)) ? 'time' : (typeof (v) === 'string' ? 'string' : 'number')\n        };\n      });\n\n      // extract rows\n      rows = _.map(data, row => {\n        return _.map(columns, col => {\n          if (row[col.text] === undefined) return null;\n\n          // time to millisec\n          return col.type == 'time' ? row[col.text] * 1000 : row[col.text];\n        })\n      });\n    }\n\n    // return res;\n    return {\n      data: [{\n        type: \"table\",\n        columns: columns,\n        rows: rows,\n      }]\n    };\n  }\n\n  timeseriesResponse(targets, data) {\n    var res = {\n      data: _.map(targets, target => {\n        let [timeframe, metric] = target.target.split('.');\n\n        return {\n          target: target.target,\n          datapoints: _.map(data, d => {\n            return [d[metric], d.time*1000];\n          }),\n        };\n      })\n    }\n\n    return res;\n  }\n\n  testDatasource() {\n    return this.doRequest({\n      url: this.url,\n      method: 'GET',\n    }).then(response => {\n      if (response.status === 200) {\n        return { status: \"success\", message: \"Data source is working\", title: \"Success\" };\n      }\n      return { status: \"error\", message: `Data source returned status ${response.status}`, title: \"Error\" };\n    });\n  }\n\n  annotationQuery(options) {\n    return [];\n  }\n\n  doRequest(options) {\n    return this.backendSrv.datasourceRequest(options);\n  }\n\n  buildQueryParameters(options) {\n    // remove placeholder targets\n    options.targets = _.filter(options.targets, target => {\n      return target.target !== 'select metric';\n    });\n\n    var targets = _.map(options.targets, target => {\n      return {\n        target: this.templateSrv.replace(target.target, options.scopedVars, 'regex'),\n        refId: target.refId,\n        hide: target.hide,\n        type: target.type\n      };\n    });\n\n    options.targets = targets;\n\n    return options;\n  }\n}\n","import { DarkSkyDatasource } from './datasource';\nimport { DarkSkyQueryCtrl } from './query_ctrl';\nimport { DarkSkyConfigCtrl } from './config_ctrl';\n\nexport {\n  DarkSkyDatasource as Datasource,\n  DarkSkyQueryCtrl as QueryCtrl,\n  DarkSkyConfigCtrl as ConfigCtrl,\n};\n","import { QueryCtrl } from 'grafana/app/plugins/sdk';\n// import './css/query-editor.css!'\n\nexport class DarkSkyQueryCtrl extends QueryCtrl {\n  static templateUrl = 'partials/query.editor.html';\n  \n  private types: {text: string, value: string}[];\n\n  /** @ngInject **/\n  constructor($scope, $injector, private templateSrv)  {\n    super($scope, $injector);\n\n    this.types = [{ text: 'Time series', value: 'timeseries' }, { text: 'Table', value: 'table' }];\n\n    this.target.target = this.target.target || 'select metric';\n    this.target.type = this.target.type || ((this.panelCtrl.panel.type === 'table') ? 'table' : 'timeseries');\n  }\n\n  getOptions(query) {\n    return this.datasource.metricFindQuery(this.target.type);\n  }\n\n  refresh() {\n    this.panelCtrl.refresh(); // Asks the panel to refresh data.\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE_grafana_app_plugins_sdk__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;"],"sourceRoot":""}